<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disaster Monitoring Dashboard</title>
    <style>
        body { font-family: system-ui, sans-serif; background-color: #121212; color: #e0e0e0; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        .dashboard { text-align: center; background-color: #1e1e1e; padding: 30px; border-radius: 12px; box-shadow: 0 5px 25px rgba(0,0,0,0.5); max-width: 900px; width: 100%; }
        h1 { color: #bb86fc; border-bottom: 2px solid #373737; padding-bottom: 15px; margin-top: 0; }
        .sensor-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin-top: 20px; }
        .sensor-card {
            background-color: #2c2c2c;
            padding: 15px 20px;
            border-radius: 8px;
            min-width: 160px;
            flex-grow: 1;
            transition: background-color 0.3s ease, border 0.3s ease; /* Smooth transition for background/border */
            border: 2px solid transparent; /* Default transparent border */
        }
        .sensor-card h2 { margin-top: 0; font-size: 1.1em; color: #a2a2a2; }
        .sensor-card p { font-size: 2em; margin: 0; color: #fff; font-weight: bold; }
        
        /* --- THIS CSS IS NOW UNUSED, BUT IT'S OK TO LEAVE IT --- */
        .card-alert {
            background-color: #4a1c22; /* A darker red background */
            border: 2px solid #cf6679; /* A bright red border */
            box-shadow: 0 5px 25px rgba(207, 102, 121, 0.4); /* Glowing red shadow */
        }
        .card-alert h2 {
            color: #ff7575 !important; /* Make title text red too for emphasis */
        }
        .card-alert p {
            color: #fff !important; /* Keep data white or change if desired */
        }
    </style>
</head>
<body>

    <div class="dashboard">
        <h1>Live Sensor Readings</h1>
        <div class="sensor-grid">
            <div id="temp-card" class="sensor-card">
                <h2>ğŸŒ¡ï¸ Temperature</h2>
                <p id="temp-data">---</p>
            </div>
            <div id="humidity-card" class="sensor-card">
                <h2>ğŸ’§ Humidity</h2>
                <p id="humidity-data">---</p>
            </div>
            <div id="smoke-card" class="sensor-card">
                <h2>ğŸ”¥ Smoke Level</h2>
                <p id="smoke-data">---</p>
            </div>
            <div id="pm25-card" class="sensor-card">
                <h2>ğŸ’¨ PM2.5</h2>
                <p id="pm25-data">---</p>
            </div>
            <div id="pm10-card" class="sensor-card">
                <h2>ğŸ’¨ PM10</h2>
                <p id="pm10-data">---</p>
            </div>
            <div id="water-card" class="sensor-card">
                <h2>ğŸŒŠ Water Level</h2>
                <p id="water-data">---</p>
            </div>
            <div id="rain-card" class="sensor-card">
                <h2>ğŸŒ§ï¸ Rain</h2>
                <p id="rain-data">---</p>
            </div>
            <div id="flame-card" class="sensor-card">
                <h2>ğŸ”¥ Flame</h2>
                <p id="flame-data">---</p>
            </div>
            <div id="shake-card" class="sensor-card">
                <h2>ğŸŒ‹ Shake</h2>
                <p id="shake-data">---</p>
            </div>
            <div id="gps-card" class="sensor-card">
                <h2>ğŸ“ Location (Lat, Lon)</h2>
                <p id="gps-data">---</p>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        // --- I'VE REMOVED THE 'THRESHOLDS' OBJECT ---

        // Get references to all the paragraph elements
        // (Note: we don't need the parent card divs anymore)
        const elements = {
            // Data paragraphs
            tempData: document.getElementById('temp-data'),
            humidityData: document.getElementById('humidity-data'),
            smokeData: document.getElementById('smoke-data'),
            pm25Data: document.getElementById('pm25-data'),
            pm10Data: document.getElementById('pm10-data'),
            waterData: document.getElementById('water-data'),
            rainData: document.getElementById('rain-data'),
            flameData: document.getElementById('flame-data'),
            shakeData: document.getElementById('shake-data'),
            gpsData: document.getElementById('gps-data')
            // --- I'VE REMOVED THE '...Card' REFERENCES ---
        };

        socket.on('sensor-data', (data) => {
            // --- 1. Update the display with new values ---
            elements.tempData.innerText = data.temperature.toFixed(1) + ' Â°C';
            elements.humidityData.innerText = data.humidity.toFixed(1) + ' %';
            elements.smokeData.innerText = data.smoke;
            elements.pm25Data.innerText = data.pm25 + ' Âµg/mÂ³';
            elements.pm10Data.innerText = data.pm10 + ' Âµg/mÂ³';
            elements.waterData.innerText = data.waterLevel.toFixed(1) + ' cm';
            elements.shakeData.innerText = data.shake.toFixed(2);
            elements.gpsData.innerText = `${data.latitude.toFixed(4)}, ${data.longitude.toFixed(4)}`;
            elements.rainData.innerText = data.isRaining ? 'Raining' : 'Clear';
            elements.flameData.innerText = data.isFlame ? 'Detected' : 'Normal';

            // --- 2. I'VE REMOVED THE ENTIRE THRESHOLD CHECKING BLOCK ---
            
        });
    </script>
</body>
</html>
